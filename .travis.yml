sudo: required

services:
        - docker

before_install:
        - docker pull adamryman/splunk-travis-ci:latest
        - docker images
        - docker run --hostname splunk --name splunk -p 8089:8089 -d adamryman/splunk-travis-ci
        - docker ps -a
        - docker ps -q
        - docker exec splunk ls
        - sudo apt-get update
        - sudo apt-get install curl
        - docker exec splunk cat /opt/splunk/etc/system/local/server.conf
        - curl --version
        - curl -k --verbose --sslv3 https://0.0.0.0:8089/services/auth/login -d username=admin -d password=changeme
        - node sdkdo tests context
        - curl -k --verbose https://localhost:8089/services/auth/login -d username=admin -d password=changeme
        - curl -k --verbose https://localhost:8089/services/auth/login -d username=admin -d password=changeme

language: node_js

script:
        node sdkdo tests context
